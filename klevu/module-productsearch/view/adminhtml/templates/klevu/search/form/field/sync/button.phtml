<?php /** @var \Klevu\Search\Block\Adminhtml\Form\Field\Sync\Button $this */ ?>
<button id="<?php echo $this->getHtmlId() ?>" class="scalable" type="button">
    <span><?php echo __($this->getButtonLabel()) ?></span>
</button>
<script type="text/javascript">
    require(["prototype"], function(){
        $("<?php echo $this->getHtmlId() ?>").observe("click", function () {
            if(document.getElementById('klevu_search_product_sync_sync_options')) {
                var syncoptions = document.getElementById('klevu_search_product_sync_sync_options').value;
                new Ajax.Request("<?php echo $this->getUrl('klevu_search/savesyncoption/option'); ?>" + '?sync_options=' + syncoptions, {
                    method: 'POST',
                    onComplete: function(data) {
                        setLocation("<?php echo $this->getDestinationUrl() ?>");
                    }
                });
            } else {
                setLocation("<?php echo $this->getDestinationUrl() ?>");
            }
            
        });
    });
</script>
